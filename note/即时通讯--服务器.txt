  
  1.一个完整的IM系统：
	-接入服务：
		连接保持、协议解析、Session维护和消息推送。
	-业务处理服务：
		类似CPU,处理业务逻辑
	-存储服务：
		账号信息、关系链，以及消息本?，都需要进?持久化存储
	-外部接口服务：
		在APP与IM连接断开后依然能传递消息,使用到手机自带的公共连接服务
	
	-接入服务与业务处理服务需要分开：
		因为接入服务是高可用需要保持<--->业务处理会不断更新需要经常上线重启,
 
  2.IM系统特性
	1) 实时性
		-快触达，耗费资源少
		-实时性发展：
			请求响应->短轮询->长轮询->服务器推送Websocket协议
								|—--->TCP衍生的IM协议
		-websocket协议：方便快捷
		-基于TCP的私有协议：自己设定(*大厂常用*)
	2) 可靠性
		-ACK机制
		-时间戳灵活使用,时间戳也可能出现多机器时钟不同步问题,可以用全局自增序列作为版本号代替。
	3) 一致性
		-时序一致性
		
	4) 安全性
		-传输上：加TLS协议实现一堆加密算法
		-账号密码保护：高强度单项散列算法:SHA、MD5算法------|
					   每个账号独享的盐（随机长字符）结合---|->增加消息成本
		-消息内容：建立敏感词库,图片识别,			   
		
 3.搭建IM需要解决的问题
	-消息存储：
		-消息索引和消息内容：	
			-案例1：*点对点消息的存储*
				-类型：参与者两个：消息发送方,消息接收方。收发双方历史信息相互独立。
				-数据库设计:两个消息记录索引，两个库。
					
					
					
				
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		